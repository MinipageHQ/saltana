(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{382:function(t,e,a){"use strict";a.r(e);var s=a(45),n=Object(s.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"users"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#users"}},[t._v("#")]),t._v(" Users")]),t._v(" "),a("p",[t._v("Users are critical to your platform as they usually own or "),a("RouterLink",{attrs:{to:"/search/"}},[t._v("Search")]),t._v(" your platform "),a("RouterLink",{attrs:{to:"/assets/"}},[t._v("Assets")]),t._v(" and potentially generate "),a("RouterLink",{attrs:{to:"/transactions.html"}},[t._v("Transactions")]),t._v(".")],1),t._v(" "),a("p",[t._v("Just provide a "),a("code",[t._v("username")]),t._v(" and a "),a("code",[t._v("password")]),t._v(" to create a User:")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" stelace"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("users"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("create")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  username"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'user@example.com'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  password"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'secretPassword'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[a("code",[t._v("username")]),t._v(" is unique across all your users. It can be anything that makes sense to your business: an email, a phone number or a special internal ID.")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),a("p",[a("code",[t._v("password")]),t._v(" is securely salted and hashed before being saved to your database.")])]),t._v(" "),a("h2",{attrs:{id:"private-information"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#private-information"}},[t._v("#")]),t._v(" Private information")]),t._v(" "),a("p",[t._v("Stelace trusts in "),a("em",[t._v("privacy by design")]),t._v(". We intentionally hide information related to User identity.")]),t._v(" "),a("p",[t._v("For instance, only the authorized staff members (having access to "),a("code",[t._v("private")]),t._v(" namespace) and Users themselves will see following personal data:")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("username")])]),t._v(" "),a("li",[a("code",[t._v("firstname")])]),t._v(" "),a("li",[a("code",[t._v("lastname")])]),t._v(" "),a("li",[a("code",[t._v("email")])])]),t._v(" "),a("p",[t._v("Stelace provides the public property "),a("code",[t._v("displayName")]),t._v(" that can be viewed by any other User.")]),t._v(" "),a("h2",{attrs:{id:"authentication"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#authentication"}},[t._v("#")]),t._v(" Authentication")]),t._v(" "),a("p",[t._v("To authenticate a User and perform actions with their account, using "),a("a",{attrs:{href:"https://github.com/stelace/stelace.js",target:"_blank",rel:"noopener"}},[t._v("stelace.js"),a("OutboundLink")],1),t._v(":")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" stelace"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("auth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("login")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  username"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'user@example.com'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  password"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'secretPassword'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),a("p",[t._v("You have to use a publishable API key ("),a("code",[t._v("pubk_...")]),t._v(") instead of a secret one ("),a("code",[t._v("seck_...")]),t._v(") when dealing with user sessions, for a secret key would make user restricted permissions useless.")])]),t._v(" "),a("p",[t._v("To destroy the current user authentication session:")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" stelace"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("auth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("logout")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h2",{attrs:{id:"sso-external-authentication"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#sso-external-authentication"}},[t._v("#")]),t._v(" SSO & external authentication")]),t._v(" "),a("p",[t._v("Stelace lets you authenticate your users with external providers, from social login to Enterprise-level SSO.")]),t._v(" "),a("h3",{attrs:{id:"social-login"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#social-login"}},[t._v("#")]),t._v(" Social login")]),t._v(" "),a("p",[t._v("All plans currently support the following OAuth2 providers (links to specific instructions to create an app):")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://developer.github.com/apps/building-oauth-apps/creating-an-oauth-app",target:"_blank",rel:"noopener"}},[a("code",[t._v("github")]),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://developers.google.com/identity/protocols/oauth2/openid-connect",target:"_blank",rel:"noopener"}},[a("code",[t._v("google")]),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://developers.facebook.com/docs/facebook-login/web",target:"_blank",rel:"noopener"}},[a("code",[t._v("facebook")]),a("OutboundLink")],1)])]),t._v(" "),a("p",[t._v("Stelace server is pre-configured for these providers, and will automatically populate your Users created via social login with following provider data:")]),t._v(" "),a("ul",[a("li",[t._v("Github: "),a("code",[t._v("email")]),t._v(", "),a("code",[t._v("displayName")])]),t._v(" "),a("li",[t._v("Google: "),a("code",[t._v("email")]),t._v(", "),a("code",[t._v("firstname")]),t._v(", "),a("code",[t._v("lastname")]),t._v(", "),a("code",[t._v("displayName")]),t._v(" (google "),a("code",[t._v("name")]),t._v(")")]),t._v(" "),a("li",[t._v("Facebook: "),a("code",[t._v("email")]),t._v(", "),a("code",[t._v("firstname")]),t._v(", "),a("code",[t._v("lastname")]),t._v(", "),a("code",[t._v("displayName")]),t._v(" (facebook "),a("code",[t._v("name")]),t._v(")")])]),t._v(" "),a("p",[t._v("All you need to do is to enable any of these providers in the private configuration of your platform by including appropriate credentials, as following.")]),t._v(" "),a("h4",{attrs:{id:"creating-your-oauth2-app-with-a-provider"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#creating-your-oauth2-app-with-a-provider"}},[t._v("#")]),t._v(" Creating your OAuth2 app with a provider")]),t._v(" "),a("p",[t._v("When configuring your OAuth2 app with a provider, here are the callback URLs you have to use:")]),t._v(" "),a("ul",[a("li",[t._v("Authorization redirect/callback URI: "),a("code",[t._v("https://api.stelace.com/auth/sso/[xxx_test]/[provider]/callback")])]),t._v(" "),a("li",[t._v("Logout callback (OpenId): "),a("code",[t._v("https://api.stelace.com/auth/sso/[xxx_test]/[provider]/logout/callback")])])]),t._v(" "),a("p",[t._v("where "),a("code",[t._v("[xxx_test]")]),t._v(" is a unique identifier for your platform and environment (either "),a("code",[t._v("live")]),t._v(" or "),a("code",[t._v("test")]),t._v(").")]),t._v(" "),a("p",[t._v("Your platform identifier is available on the configuration page of your "),a("a",{attrs:{href:"https://stelace.com/dashboard/configuration",target:"_blank",rel:"noopener"}},[t._v("dashboard"),a("OutboundLink")],1),t._v(".")]),t._v(" "),a("h4",{attrs:{id:"setting-up-social-login-with-stelace-api"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#setting-up-social-login-with-stelace-api"}},[t._v("#")]),t._v(" Setting up social login with Stelace API")]),t._v(" "),a("p",[t._v("Here is how you can setup social login using "),a("RouterLink",{attrs:{to:"/sdk.html"}},[t._v("stelace.js")]),t._v(":")],1),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" stelace"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("config"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("updatePrivate")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  stelace"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    ssoConnections"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// provider can be: 'github', 'facebook' or 'google'")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("provider"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        protocol"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'oauth2'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        clientId"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'[clientId]'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        clientSecret"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'[clientSecret]'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// local development with starter kit: 'http://localhost:8080'")]),t._v("\n        afterAuthenticationUrl"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'[applicationUrl]'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        active"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),a("p",[t._v("You need to use your secret key, since "),a("code",[t._v("config:edit:all")]),t._v(" permission is required to edit your platform private configuration.")])]),t._v(" "),a("p",[t._v("Please refer to official instructions of providers mentioned "),a("a",{attrs:{href:"#social-login"}},[t._v("above")]),t._v(" to get your "),a("code",[t._v("clientId")]),t._v(" and "),a("code",[t._v("clientSecret")]),t._v(". Facebook may refer to clientId and clientSecret as "),a("code",[t._v("App IP")]),t._v(" and "),a("code",[t._v("App Secret")]),t._v(" respectively.")]),t._v(" "),a("p",[t._v("That’s it for the backend!")]),t._v(" "),a("h4",{attrs:{id:"front-end"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#front-end"}},[t._v("#")]),t._v(" Front-end")]),t._v(" "),a("p",[t._v("Front-end integration will vary depending on your stack. Basically "),a("code",[t._v("[apiUrl]/auth/sso/[xxx_test]/[provider]")]),t._v(" URI and a button is all you need to get started, where "),a("code",[t._v("[apiUrl]")]),t._v(" is "),a("code",[t._v("https://api.stelace.com")]),t._v(" or your own deployment URL, and "),a("code",[t._v("[xxx_test]")]),t._v(" your platform identifier.")]),t._v(" "),a("p",[t._v("With "),a("RouterLink",{attrs:{to:"/sdk.html"}},[t._v("stelace.js SDK")]),t._v(" in your front-end, getting an authentication token after social login redirection back to your app is as simple as:")],1),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// `code` extraction function depends on your front-end.")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// In Vue.js starter kit, this would simply be:")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// const { code } = this.$route.query")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" code "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getCodeFromCurrentAfterAuthenticationUrl")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// SDK stores tokens in browser localStorage for next requests")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" stelace"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("auth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getTokens")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  grantType"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'authorizationCode'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  code\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("You can see how this fits in our "),a("a",{attrs:{href:"https://marketplace.demo.stelace.com",target:"_blank",rel:"noopener"}},[t._v("open-source marketplace template"),a("OutboundLink")],1),t._v(" login popup.\nAuthentication popup "),a("a",{attrs:{href:"https://github.com/stelace/marketplace-demo/blob/v0.7.0/src/components/AuthDialog.vue#L360-L380",target:"_blank",rel:"noopener"}},[t._v("source-code (Vue.js)"),a("OutboundLink")],1),t._v(" of the starter kit currently includes Github login button as an example.")]),t._v(" "),a("h3",{attrs:{id:"sso"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#sso"}},[t._v("#")]),t._v(" SSO")]),t._v(" "),a("p",[t._v("For more details about OAuth2 configuration, please refer to "),a("a",{attrs:{href:"https://docs.api.stelace.com#15a789c6-2ee4-426c-9872-5c3b724551be",target:"_blank",rel:"noopener"}},[t._v("API Reference "),a("Badge",{attrs:{text:"API",type:"tip"}}),a("OutboundLink")],1),t._v(".")]),t._v(" "),a("p",[a("code",[t._v("ssoConnections")]),t._v(" configuration object can accept custom SSO configurations with an appropriate plan.")]),t._v(" "),a("p",[t._v("Enterprise plan is currently needed but please feel free to "),a("a",{attrs:{href:"https://stelace.com/contact",target:"_blank",rel:"noopener"}},[t._v("get in touch"),a("OutboundLink")],1),t._v(".")])])}),[],!1,null,null,null);e.default=n.exports}}]);