(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{378:function(t,a,s){"use strict";s.r(a);var e=s(45),r=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"search"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#search"}},[t._v("#")]),t._v(" Search")]),t._v(" "),s("p",[t._v("Search is key to any useful inventory or successful platform.")]),t._v(" "),s("p",[t._v("Stelace Search API leverages your "),s("RouterLink",{attrs:{to:"/assets/"}},[t._v("Assets")]),t._v(" with dynamic matchmaking relying on typo-tolerant text search including "),s("RouterLink",{attrs:{to:"/assets/custom-attributes.html"}},[t._v("Custom Attributes")]),t._v(", "),s("RouterLink",{attrs:{to:"/search/availability.html"}},[t._v("Availability")]),t._v(", "),s("RouterLink",{attrs:{to:"/transactions.html"}},[t._v("Transaction")]),t._v(" states and "),s("a",{attrs:{href:"#location"}},[t._v("geo-coordinates")]),t._v(".")],1),t._v(" "),s("p",[t._v("All it takes is an API call and a few dozens of milliseconds:")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" stelace"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("search"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("list")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  query"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Deloran'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// did you notice the typo?")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" https://api.stelace.com/search "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  -u seck_test_rylx3ebUg0bNs1HkJKlqNHkI: "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  -d "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("query")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("Deloran\n")])])]),s("p",[t._v("A lot of things happen in parallel behind the scenes. Here are the most important ones:")]),t._v(" "),s("ul",[s("li",[t._v("Stelace only considers Assets that are available right now by default.")]),t._v(" "),s("li",[t._v("Full-text search relies on built-in "),s("code",[t._v("name")]),t._v(" and "),s("code",[t._v("description")]),t._v(" Asset properties. It’s very easy to add your own "),s("RouterLink",{attrs:{to:"/assets/custom-attributes.html"}},[t._v("Custom Attributes")]),t._v(" to your Assets. Full-text search query relies on all your "),s("em",[t._v("text")]),t._v(" Custom Attributes by default, in addition to built-in name and description.")],1),t._v(" "),s("li",[t._v("Search is typo-tolerant so that “Delorean” cars will be returned as expected despite the missing “e”.")]),t._v(" "),s("li",[t._v("Default sorting applies if no order is specified: most recent Assets first. Search can meet your ranking needs with advanced yet elegant sorting options.")])]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("Note: with Stelace you don’t have to re-index your Assets to update "),s("a",{attrs:{href:"#sorting"}},[t._v("sorting order")]),t._v(".\nSorting happens on the fly, for higher flexibility.")])]),t._v(" "),s("p",[s("strong",[t._v("What makes Stelace search powerful is its dynamic nature")]),t._v(", relying on availability concept. Each Asset can have several states in the future described by "),s("RouterLink",{attrs:{to:"/search/availability.html"}},[t._v("Availabilities")]),t._v(".")],1),t._v(" "),s("h2",{attrs:{id:"availability-and-future-states"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#availability-and-future-states"}},[t._v("#")]),t._v(" Availability and future states")]),t._v(" "),s("p",[t._v("Stelace Search can return Assets available in the future:")]),t._v(" "),s("ul",[s("li",[t._v("during a given period by specifying "),s("code",[t._v("startDate")]),t._v(" and "),s("code",[t._v("endDate")]),t._v(",")]),t._v(" "),s("li",[t._v("with a given "),s("code",[t._v("quantity")]),t._v(" available now or over a given period,")]),t._v(" "),s("li",[t._v("around some location.")])]),t._v(" "),s("h3",{attrs:{id:"date"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#date"}},[t._v("#")]),t._v(" Date")]),t._v(" "),s("p",[t._v("If you specify "),s("code",[t._v("startDate")]),t._v(" and "),s("code",[t._v("endDate")]),t._v(" and don’t disable automatic Availability filtering "),s("code",[t._v("availabilityFilter: { enabled: false }")]),t._v(", only Assets available during the full period will show up in results.")]),t._v(" "),s("p",[t._v("If only "),s("code",[t._v("startDate")]),t._v(" is specified, only Assets having "),s("em",[t._v("some")]),t._v(" availability past this date will be returned.")]),t._v(" "),s("h3",{attrs:{id:"quantity"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#quantity"}},[t._v("#")]),t._v(" Quantity")]),t._v(" "),s("p",[t._v("If "),s("code",[t._v("quantity")]),t._v(" is specified with dates, appropriate number of units have to be available over the related period. Quantity is "),s("code",[t._v("1")]),t._v(" by default.")]),t._v(" "),s("p",[t._v("Please note that quantity may not be considered depending on the "),s("RouterLink",{attrs:{to:"/assets/asset-types.html"}},[t._v("Asset Type")]),t._v(" "),s("code",[t._v("infiniteStock")]),t._v(" property.")],1),t._v(" "),s("h3",{attrs:{id:"location"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#location"}},[t._v("#")]),t._v(" Location")]),t._v(" "),s("p",[t._v("Locations can be passed as a geo-coordinate object, used as origin for calculations:")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  …"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  location"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    latitude"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("34.046713")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    longitude"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("118.107380")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  maxDistance"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100000")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("You can specify "),s("code",[t._v("maxDistance")]),t._v(" in meters to exclude Assets too far from origin, set to "),s("code",[t._v("150000")]),t._v(" by default.")]),t._v(" "),s("h2",{attrs:{id:"filtering"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#filtering"}},[t._v("#")]),t._v(" Filtering")]),t._v(" "),s("p",[t._v("Search "),s("code",[t._v("filter")]),t._v(" offers a powerful syntax to combine Custom Attributes of "),s("RouterLink",{attrs:{to:"/assets/custom-attributes.html#types"}},[t._v("any type")]),t._v(" and built-in attributes with boolean logic.")],1),t._v(" "),s("p",[t._v("Here is how we can find all cars having either GPS or air conditioning "),s("em",[t._v("and")]),t._v(" of make Ford, unless they are cheaper than $5000.")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" stelace"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("search"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("list")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  filter"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'options[GPS, AC] > 1 AND (make == ford OR NOT (_price >= 5000))'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h3",{attrs:{id:"built-ins"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#built-ins"}},[t._v("#")]),t._v(" Built-ins")]),t._v(" "),s("p",[t._v("Stelace default attributes of Asset objects must be preceded by an underscore as in “"),s("code",[t._v("_price")]),t._v("” to avoid confusion with your own "),s("a",{attrs:{href:"/assets/custom-attributes"}},[t._v("Custom Attributes")]),t._v(".")]),t._v(" "),s("h3",{attrs:{id:"operators"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#operators"}},[t._v("#")]),t._v(" Operators")]),t._v(" "),s("h4",{attrs:{id:"boolean-operators"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#boolean-operators"}},[t._v("#")]),t._v(" Boolean operators")]),t._v(" "),s("p",[t._v("From highest to lowest precedence:")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("NOT")]),t._v(", that must be followed by an expression in parentheses,")]),t._v(" "),s("li",[s("code",[t._v("AND")]),t._v(" / "),s("code",[t._v("&&")])]),t._v(" "),s("li",[s("code",[t._v("OR")]),t._v(" / "),s("code",[t._v("||")])])]),t._v(" "),s("p",[t._v("You can use parentheses to ensure appropriate boolean precedence in your "),s("code",[t._v("filter")]),t._v(" expression.")]),t._v(" "),s("p",[t._v("Custom Attributes of type "),s("code",[t._v("boolean")]),t._v(" are very easy to use in "),s("code",[t._v("filter")]),t._v(". Let’s imagine one of your "),s("RouterLink",{attrs:{to:"/assets.html"}},[t._v("Assets")]),t._v(" has a boolean "),s("code",[t._v("automaticTransmission")]),t._v(" Custom Attribute set to "),s("code",[t._v("true")]),t._v(".\nIt will be returned by the following Search request, even if it is not available:")],1),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" stelace"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("search"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("list")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  filter"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'_available OR automaticTransmission'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  availabilityFilter"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" enabled"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[t._v("Note that we use "),s("code",[t._v("_available")]),t._v(" boolean "),s("a",{attrs:{href:"#built-ins"}},[t._v("built-in")]),t._v(" by "),s("a",{attrs:{href:"#sort-by-availability"}},[t._v("disabling "),s("code",[t._v("availabilityFilter")])]),t._v(", so that all Assets are included in Search results, not just available Assets (default behavior).")]),t._v(" "),s("h4",{attrs:{id:"comparison-operators"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#comparison-operators"}},[t._v("#")]),t._v(" Comparison operators")]),t._v(" "),s("ul",[s("li",[t._v("Number comparison operators "),s("code",[t._v("<")]),t._v(", "),s("code",[t._v("<=")]),t._v(", "),s("code",[t._v(">=")]),t._v(", "),s("code",[t._v(">")])]),t._v(" "),s("li",[t._v("Equality operator "),s("code",[t._v("==")])])]),t._v(" "),s("p",[t._v("Equality operator "),s("code",[t._v("==")]),t._v(" can be used with Custom Attributes of type "),s("code",[t._v("text")]),t._v(" as well, provided they’re shorter than 255 characters.")]),t._v(" "),s("h4",{attrs:{id:"list-operator"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#list-operator"}},[t._v("#")]),t._v(" List operator")]),t._v(" "),s("p",[t._v("Square brackets "),s("code",[t._v("[]")]),t._v(" allow to enclose comma-separated values that must be wrapped in quotes when having special characters.")]),t._v(" "),s("p",[s("code",[t._v("[]")]),t._v(" list must be preceded by a Custom Attribute name, of "),s("RouterLink",{attrs:{to:"/assets/custom-attributes.html#types"}},[t._v("type")]),t._v(" "),s("code",[t._v("tags")]),t._v(" or "),s("code",[t._v("select")]),t._v(".")],1),t._v(" "),s("p",[s("code",[t._v("attr[some, values]")]),t._v("-like expression returns an integer corresponding to the number of matched values. It is either "),s("code",[t._v("0")]),t._v(" or "),s("code",[t._v("1")]),t._v(" for attributes of type "),s("code",[t._v("select")]),t._v(", but can be as high as the number of submitted values for "),s("code",[t._v("tags")]),t._v(" type, meaning an Asset has them all.")]),t._v(" "),s("p",[t._v("You can use "),s("a",{attrs:{href:"#comparison-operators"}},[t._v("Number comparison operators")]),t._v(" to make your Search very precise and only return Assets having some number of matches.\nIf you omit comparison when using "),s("code",[t._v("attr[…]")]),t._v(" list expression, "),s("code",[t._v("filter")]),t._v(" will include all Assets having "),s("em",[t._v("at least")]),t._v(" one match in "),s("code",[t._v("[…]")]),t._v(" values.")]),t._v(" "),s("h2",{attrs:{id:"sorting"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#sorting"}},[t._v("#")]),t._v(" Sorting")]),t._v(" "),s("p",[t._v("You can sort your results by price and Custom Attributes of type number, boolean or text (max. 256 chars) in one or several steps.\nEach additional sort step acts as a tiebreaker.")]),t._v(" "),s("p",[t._v("You just have to provide a "),s("code",[t._v("sort")]),t._v(" object in your API call:")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  …\n  sort"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"_price"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"asc"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// built-ins denoted by trailing _ (underscore)")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"seatingCapacity"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"desc"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h3",{attrs:{id:"sort-by-availability"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#sort-by-availability"}},[t._v("#")]),t._v(" Sort by availability")]),t._v(" "),s("p",[t._v("You may need to get both available and unavailable Assets in Search results to implement some custom filtering on your side, e.g. in your UI.")]),t._v(" "),s("p",[t._v("To do so you can set "),s("code",[t._v("availabilityFilter.enabled")]),t._v(" to "),s("code",[t._v("false")]),t._v(" so that a built-in boolean attribute "),s("code",[t._v("available")]),t._v(" will be added to each Asset. None will be excluded from Search results.")]),t._v(" "),s("p",[t._v("Let’s imagine you want to get available Assets first and then order by a "),s("code",[t._v("popularity")]),t._v(" Custom Attribute:")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" stelace"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("search"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("list")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  sort"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" _available"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'desc'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" popularity"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'desc'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  availabilityFilter"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    enabled"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h2",{attrs:{id:"similar-assets-or-more-like-this"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#similar-assets-or-more-like-this"}},[t._v("#")]),t._v(" Similar assets or “More like this”")]),t._v(" "),s("p",[t._v("You can use "),s("code",[t._v("similarTo")]),t._v(" array of Asset ids or single Asset id to search for similar Assets and still use any other Search parameter.")]),t._v(" "),s("p",[t._v("It can be a convenient way to build a “more like this” feature for your "),s("RouterLink",{attrs:{to:"/users.html"}},[t._v("Users")]),t._v(", depending on their browsing history in your inventory.")],1)])}),[],!1,null,null,null);a.default=r.exports}}]);